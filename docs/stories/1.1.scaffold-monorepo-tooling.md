# Story 1.1: Scaffold Monorepo & Tooling Skeleton

## Status
Draft

## Story
**As a** HaiGo platform engineer onboarding the project,
**I want** a scaffolded pnpm monorepo with core apps, Move module, and shared tooling in place,
**so that** I can begin implementing product features with consistent structure and guardrails.

## Acceptance Criteria
1. A pnpm workspace root exists with `pnpm-workspace.yaml` linking `apps/web`, `apps/bff`, `move/warehouse_rwa`, and `packages/shared` (`docs/architecture.md:23`).
2. `apps/web` contains a Next.js + TypeScript scaffold aligned with wallet-first dApp patterns (`docs/architecture.md:442`).
3. `apps/bff` exposes an Express/TypeScript starter aligned with the read-only BFF responsibilities (`docs/architecture.md:596`).
4. `move/warehouse_rwa` is initialized via `aptos move init` and compiles the skeleton module from Architecture v1.0.1 (ยง4) without errors (`docs/architecture.md:78`).
5. Shared lint/format tooling (ESLint, Prettier, TypeScript config) lives under `packages/shared` and is consumed by both apps (`docs/architecture.md:21`).
6. Husky + lint-staged, along with `pnpm run prepush`, run formatting, linting, and Move lint prior to pushes (`docs/architecture.md:33`).
7. `pnpm install` plus `pnpm run bootstrap` stand up all scaffolds without manual edits (mirrors Process in `docs/architecture.md:26`).
8. Story delivery includes repo README updates noting new structure and commands.
9. Regression: executing `pnpm lint`, `pnpm test`, and `pnpm run move:test` succeeds in CI-compatible environment.

## Tasks / Subtasks
- [ ] Generate pnpm workspace root and folder structure (AC:1)
  - [ ] Author `pnpm-workspace.yaml` mapping apps and shared packages
  - [ ] Create baseline `.npmrc` / `.gitignore`
- [ ] Scaffold Next.js wallet-ready app in `apps/web` (AC:2)
  - [ ] Install Next.js/TypeScript deps
  - [ ] Add basic layout + Aptos wallet adapter wiring
- [ ] Scaffold Express BFF service in `apps/bff` (AC:3)
  - [ ] Install Express/TS tooling with nodemon / ts-node-dev
  - [ ] Provide placeholder routes aligning with OpenAPI tags
- [ ] Initialize Move module (AC:4)
  - [ ] Run `aptos move init` and copy skeleton from architecture doc
  - [ ] Add package build scripts for Move tests
- [ ] Configure shared tooling (AC:5-7)
  - [ ] Extract ESLint/TS configs into `packages/shared`
  - [ ] Configure Husky hooks + lint-staged + `pnpm run prepush`
  - [ ] Document commands in README (AC:8)
- [ ] Validate toolchain (AC:9)
  - [ ] Run lint/test/move:test locally and note expected outputs

## Dev Notes
- Monorepo structure and scripts align with Project Setup guidance (`docs/architecture.md:21`).
- Frontend scaffold should preload wallet utilities from Aptos TS SDK template (`docs/architecture.md:442`).
- BFF stub follows read-only responsibilities and must not include signing logic (`docs/architecture.md:596`).
- Move skeleton copy retains module namespace `haigo::warehouse_rwa` and constants defined in ยง4.

### Testing
- JS/TS: `pnpm lint`, `pnpm test` (Jest/Vitest baseline) executed from root.
- Move: `pnpm run move:test` wrapping `aptos move test` for module skeleton.
- Hooks: verify `pnpm run prepush` runs formatting, lint, and move lint without failures.

## Change Log
| Date       | Version | Description                              | Author |
|------------|---------|------------------------------------------|--------|
| 2025-09-16 | v0.1    | Initial draft created from Epic Story 1. | Sarah  |

## Dev Agent Record
### Agent Model Used

### Debug Log References

### Completion Notes List

### File List

## QA Results


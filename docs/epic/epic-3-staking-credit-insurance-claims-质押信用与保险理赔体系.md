# Epic 3: Staking Credit & Insurance Claims (质押信用与保险理赔体系)
**目标**：提供仓主质押与信用评分机制，构建保险费率与理赔处理流程，形成风险控制闭环。

## Story 3.1 Staking Management Contract & Console (质押管理合约与前端控制台)
> 作为仓主，我希望在平台上质押 APT/USDT 并查看质押状态，以展示信用背书。

接受标准：
1: Move 合约实现 `stake` / `unstake`，记录质押金额、资产类型与事件。
2: 监听 `StakeChanged` 事件并在数据库同步仓主信用信息。
3: 前端仓主管理页面展示质押额度、历史变更与信用权重。
4: 测试覆盖质押/解押成功、余额不足、重复质押等场景。

## Story 3.2 Credit Scoring & Ranking Display (信用评分与排名展示)
> 作为平台运营者，我希望根据质押额度、订单完成率、评分等指标生成仓主信用分并展示排名。

接受标准：
1: 设计评分模型，支持配置质押权重、履约率、评价分等参数。
2: 后端定期计算信用分并写入数据库，可溯源得分构成。
3: 前端列表展示仓主信用分、质押额度、完成率并支持排序/筛选。
4: 提供信用分变动日志，记录时间、原因与触发指标。

## Story 3.3 Insurance Claims Process Implementation (保险理赔流程实现)
> 作为商家，我希望在订单异常时提交理赔申请，并跟进审批流程，保障资产安全。

接受标准：
1: Move 合约实现 `open_claim`、`resolve_claim`，记录证据哈希、决策与赔付金额。
2: 前端支持提交理赔申请，上传证据并显示当前理赔状态。
3: 平台运营控制台可对理赔进行审批，链上记录结果并触发事件。
4: 测试覆盖理赔开启、重复申请拦截、审批流程与状态同步。

## Story 3.4 Insurance Premium & Payment Validation (保险费率与支付校验)
> 作为平台方，我希望动态配置保险费率，确保订单创建时的保费计算与支付准确。

接受标准：
1: 在链上或后端配置保险费率（默认 1%），可按仓库或品类差异化。
2: 订单创建流程读取费率并计算保费，前端展示拆解明细。
3: Move 合约验证实付金额包含仓储费与保费，否则交易失败。
4: 集成测试覆盖不同费率场景下的支付与事件记录。
